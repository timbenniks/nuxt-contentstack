---
title: Personalization
description: Deliver personalized content experiences with Contentstack Personalize integration, including user attributes, events, and variant-based content delivery.
navigation:
  icon: i-lucide-users
---

Nuxt Contentstack provides seamless integration with Contentstack Personalize, enabling you to deliver personalized content experiences based on user attributes, behavior, and preferences.

## Overview

The Nuxt module automatically initializes the [Personalize Edge SDK](https://www.contentstack.com/docs/developers/sdks/personalize-edge-sdk/javascript/reference) and provides easy access through the `$contentstack.Personalize` object.

Key features:
- **User Attributes**: Set and track user properties
- **Event Tracking**: Monitor user interactions and conversions  
- **Variant Delivery**: Serve different content based on user segments
- **Real-time Personalization**: Dynamic content adaptation

## Quick Setup

### 1. Enable Personalization

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  modules: ['nuxt-contentstack'],
  
  'nuxt-contentstack': {
    apiKey: process.env.NUXT_CONTENTSTACK_API_KEY,
    deliveryToken: process.env.NUXT_CONTENTSTACK_DELIVERY_TOKEN,
    environment: 'production',
    
    personalization: {
      enable: true,
      projectUid: process.env.NUXT_CONTENTSTACK_PERSONALIZE_PROJECT_UID
    }
  }
})
```

### 2. Environment Variables

```bash [.env]
NUXT_CONTENTSTACK_PERSONALIZE_PROJECT_UID=your_project_uid
```

::callout{icon="i-lucide-key"}
**Project UID**: Find your project UID in Contentstack under Personalize â†’ Project Settings.
::

## Basic Usage

### Setting User Attributes

```ts [composables/usePersonalization.ts]
export const usePersonalization = () => {
  const { $contentstack } = useNuxtApp()
  
  const setUserAttributes = async (attributes: Record<string, any>) => {
    if ($contentstack.Personalize) {
      await $contentstack.Personalize.set(attributes)
    }
  }
  
  return { setUserAttributes }
}
```

### Tracking Events

```vue [components/ProductCard.vue]
<script setup>
const { $contentstack } = useNuxtApp()

const trackPurchase = async (productId: string, amount: number) => {
  await $contentstack.Personalize.triggerEvent('purchase')
}

const trackImpression = async (experienceShortUid: string) => {
  await $contentstack.Personalize.triggerImpression(experienceShortUid)
}
</script>
```

## Core SDK Methods

### User Attributes

Set user attributes for personalization targeting:

```typescript
// Set demographic attributes
await $contentstack.Personalize.set({
  age: 30,
  location: 'San Francisco',
  membership: 'premium'
})

// Set behavioral attributes
await $contentstack.Personalize.set({
  page_views: 15,
  interests: ['technology', 'design'],
  last_visit: new Date().toISOString()
})
```

### Event Tracking

Track user interactions and conversions:

```typescript
// Track conversion events
await $contentstack.Personalize.triggerEvent('signup')
await $contentstack.Personalize.triggerEvent('purchase')
await $contentstack.Personalize.triggerEvent('newsletter_subscribe')

// Track experience impressions
const experienceShortUid = 'a' // From Contentstack Personalize
await $contentstack.Personalize.triggerImpression(experienceShortUid)
```

### Variant Management

Access active variants for personalized content:

```typescript
const { $contentstack } = useNuxtApp()

// Get all active variants
const variants = $contentstack.Personalize.getVariants() // {a: '0', b: '1'}

// Get variant aliases for CMS queries
const aliases = $contentstack.Personalize.getVariantAliases() 
// ['cs_personalize_a_0', 'cs_personalize_b_1']

// Get active variant for specific experience
const activeVariant = $contentstack.Personalize.getActiveVariant('a') // '0'
```

## Personalized Content Fetching

### Automatic Variant Application

All composables automatically apply active variants:

```vue [pages/personalized-page.vue]
<script setup>
// Content will be personalized based on user attributes
const { data: content } = await useGetEntryByUrl({
  contentTypeUid: 'landing_page',
  url: '/home'
})

// Variant aliases are automatically applied
const { $contentstack } = useNuxtApp()
console.log('Active variants:', $contentstack.variantAlias)
</script>

<template>
  <div v-if="content">
    <!-- Renders personalized variant -->
    <Hero v-bind="content.hero" />
  </div>
</template>
```

### Manual Variant Handling

For advanced use cases:

```typescript
// Get current variants
const { $contentstack } = useNuxtApp()
const variantAliases = $contentstack.Personalize.getVariantAliases()

// Use in custom queries
const { data } = await $fetch('/api/content', {
  query: { variants: variantAliases.join(',') }
})
```

## Real-world Examples

### User Onboarding Flow

```vue [components/OnboardingFlow.vue]
<script setup>
const { $contentstack } = useNuxtApp()

const completeOnboardingStep = async (step: string) => {
  // Set user attributes
  await $contentstack.Personalize.set({
    onboarding_step: step,
    onboarding_completed: step === 'complete'
  })
  
  // Track event
  await $contentstack.Personalize.triggerEvent('onboarding_step_completed')
}

// Track page view
onMounted(async () => {
  await $contentstack.Personalize.set({
    last_page: 'onboarding',
    page_views: (currentPageViews || 0) + 1
  })
})
</script>
```

### Product Recommendations

```vue [components/Recommendations.vue]
<script setup>
const { $contentstack } = useNuxtApp()

// Set user preferences
const updatePreferences = async (categories: string[]) => {
  await $contentstack.Personalize.set({
    preferred_categories: categories,
    last_updated: new Date().toISOString()
  })
  
  // Refetch personalized recommendations
  await refresh()
}

// Fetch personalized content
const { data: recommendations } = await useGetEntries({
  contentTypeUid: 'product_recommendation',
  limit: 6
})
</script>
```

## Best Practices

### Performance
- Batch attribute updates when possible
- Cache personalized content appropriately
- Use specific variant queries only when needed

### Privacy
- Implement consent management
- Only collect necessary attributes
- Respect user privacy preferences

### Development
- Test personalization in preview mode
- Use DevTools for debugging
- Monitor performance impact

## Troubleshooting

**Check if personalization is enabled:**
```typescript
console.log($contentstack.Personalize ? 'Enabled' : 'Disabled')
```

**Verify variant delivery:**
```typescript
console.log('Current variants:', $contentstack.variantAlias)
console.log('Active variants:', $contentstack.Personalize?.getVariants())
```

**Debug attribute setting:**
```typescript
await $contentstack.Personalize.set({ test_attribute: 'value' })
// Check network requests in browser DevTools
```

## Next Steps

::div{class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6"}
  ::card
  ---
  title: "Live Preview"
  icon: "i-lucide-eye"
  to: "/features/live-preview"
  ---
  Combine personalization with real-time content editing.
  ::

  ::card
  ---
  title: "DevTools"
  icon: "i-lucide-wrench"  
  to: "/features/devtools"
  ---
  Debug and monitor your personalization implementation.
  ::
::
