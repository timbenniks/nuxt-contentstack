---
title: Image Optimization
description: Optimize images with Contentstack's Image Delivery API and @nuxt/image integration for responsive, fast-loading images with advanced transformations.
navigation:
  icon: i-lucide-image
---

Nuxt Contentstack provides powerful image optimization through seamless integration with @nuxt/image and Contentstack's Image Delivery API, enabling responsive images, automatic format conversion, and advanced transformations.

## Overview

Image optimization features include:

- **@nuxt/image Integration**: Native Nuxt image optimization
- **Contentstack Provider**: Custom provider for Image Delivery API
- **Responsive Images**: Automatic sizing and density handling
- **Format Optimization**: WebP, AVIF conversion with fallbacks
- **Advanced Transformations**: Resize, crop, effects, and overlays
- **Lazy Loading**: Optimized loading strategies

## Setup

### 1. Install @nuxt/image

```bash
npm install @nuxt/image
```

### 2. Configure Modules

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  modules: [
    'nuxt-contentstack',
    '@nuxt/image'
  ],
  
  // Optional: Set Contentstack as default provider
  image: {
    provider: 'contentstack'
  }
})
```

## Basic Usage

### NuxtImg Component

```vue [components/OptimizedImage.vue]
<template>
  <NuxtImg
    :src="image.url"
    :alt="image.title"
    width="800"
    height="400"
    provider="contentstack"
  />
</template>

<script setup>
defineProps<{
  image: {
    url: string
    title: string
  }
}>()
</script>
```

### NuxtPicture for Art Direction

```vue [components/ResponsiveImage.vue]
<template>
  <NuxtPicture
    :src="hero.image.url"
    :imgAttrs="{ alt: hero.image.title }"
    sizes="100vw md:50vw lg:33vw"
    densities="1x 2x"
    provider="contentstack"
  />
</template>
```

## Advanced Transformations

### Quality and Format Optimization

```vue [components/QualityOptimized.vue]
<template>
  <NuxtImg
    :src="image.url"
    :alt="image.title"
    width="600"
    height="400"
    :modifiers="{
      auto: 'webp,compress',
      quality: 85,
      format: 'webp'
    }"
    provider="contentstack"
  />
</template>
```

### Cropping and Fitting

```vue [components/CroppedImage.vue]
<template>
  <NuxtImg
    :src="gallery.image.url"
    width="300"
    height="300"
    :modifiers="{
      fit: 'crop',
      crop: 'center',
      quality: 90
    }"
    provider="contentstack"
  />
</template>
```

### Visual Effects

```vue [components/StylizedImage.vue]
<template>
  <NuxtImg
    :src="artistic.image.url"
    width="500"
    height="300"
    :modifiers="{
      blur: 2,
      brightness: 110,
      contrast: 120,
      saturation: 130,
      quality: 80
    }"
    provider="contentstack"
  />
</template>
```

## useImageTransform Composable

For programmatic image transformations and dynamic modifications:

### Basic Usage

```vue [components/DynamicImage.vue]
<script setup>
const props = defineProps<{
  imageUrl: string
  size: 'small' | 'medium' | 'large'
}>()

const sizeMap = {
  small: { width: 300, height: 200 },
  medium: { width: 600, height: 400 },
  large: { width: 1200, height: 800 }
}

const { transformedUrl } = useImageTransform(
  props.imageUrl,
  {
    ...sizeMap[props.size],
    quality: 85,
    format: 'webp',
    auto: 'compress'
  }
)
</script>

<template>
  <img 
    :src="transformedUrl" 
    :alt="alt"
    class="responsive-image"
  />
</template>
```

### Reactive Transformations

```vue [components/InteractiveImage.vue]
<script setup>
const imageUrl = ref('https://images.contentstack.io/v3/assets/example.jpg')
const quality = ref(80)
const blur = ref(0)

const { transformedUrl, updateTransform } = useImageTransform(
  imageUrl,
  {
    width: 600,
    height: 400,
    quality: quality.value,
    blur: blur.value
  }
)

// Update transformations reactively
watch([quality, blur], () => {
  updateTransform({
    quality: quality.value,
    blur: blur.value
  })
})
</script>

<template>
  <div>
    <img :src="transformedUrl" alt="Interactive image" />
    
    <div class="controls">
      <label>Quality: {{ quality }}</label>
      <input v-model="quality" type="range" min="10" max="100" />
      
      <label>Blur: {{ blur }}</label>
      <input v-model="blur" type="range" min="0" max="20" />
    </div>
  </div>
</template>
```

## Advanced Features

### Overlay Images

```typescript [composables/useWatermark.ts]
export const useWatermarkImage = (baseImageUrl: string, watermarkUrl: string) => {
  const { transformedUrl } = useImageTransform(baseImageUrl, {
    width: 800,
    height: 600,
    quality: 85,
    overlay: {
      relativeURL: watermarkUrl,
      align: 'bottom-right',
      width: '20p', // 20% of base image
      opacity: 80
    }
  })
  
  return { watermarkedUrl: transformedUrl }
}
```

### Smart Cropping

```vue [components/SmartCrop.vue]
<script setup>
const props = defineProps<{
  image: {
    url: string
    title: string
    focalPoint?: {
      x: number
      y: number
    }
  }
}>()

const { transformedUrl } = useImageTransform(props.image.url, {
  width: 400,
  height: 300,
  fit: 'crop',
  crop: props.image.focalPoint 
    ? `${props.image.focalPoint.x},${props.image.focalPoint.y}`
    : 'smart'
})
</script>

<template>
  <img 
    :src="transformedUrl" 
    :alt="image.title"
    class="smart-cropped"
  />
</template>
```

### Progressive Enhancement

```vue [components/ProgressiveImage.vue]
<script setup>
const props = defineProps<{
  imageUrl: string
  alt: string
}>()

// Low quality placeholder
const { transformedUrl: placeholder } = useImageTransform(props.imageUrl, {
  width: 50,
  quality: 20,
  blur: 5
})

// High quality image
const { transformedUrl: highQuality } = useImageTransform(props.imageUrl, {
  width: 800,
  quality: 85,
  format: 'webp'
})

const isLoaded = ref(false)
</script>

<template>
  <div class="progressive-image">
    <!-- Placeholder -->
    <img 
      v-show="!isLoaded"
      :src="placeholder"
      :alt="alt"
      class="placeholder"
    />
    
    <!-- High quality image -->
    <img 
      :src="highQuality"
      :alt="alt"
      class="high-quality"
      @load="isLoaded = true"
    />
  </div>
</template>

<style scoped>
.progressive-image {
  position: relative;
}

.placeholder {
  filter: blur(5px);
  transform: scale(1.1);
}

.high-quality {
  transition: opacity 0.3s ease;
}
</style>
```

## Responsive Images

### Breakpoint-based Sizing

```vue [components/ResponsiveHero.vue]
<template>
  <NuxtPicture
    :src="hero.image.url"
    :imgAttrs="{ alt: hero.image.title }"
    :modifiers="{
      quality: 85,
      auto: 'webp,compress'
    }"
    sizes="100vw sm:90vw md:80vw lg:1200px"
    provider="contentstack"
  />
</template>
```

### Density-aware Images

```vue [components/RetinaImage.vue]
<template>
  <NuxtImg
    :src="image.url"
    :alt="image.title"
    width="400"
    height="300"
    densities="1x 2x 3x"
    :modifiers="{ quality: 85 }"
    provider="contentstack"
  />
</template>
```

### Art Direction

```vue [components/ArtDirectedImage.vue]
<template>
  <picture>
    <!-- Desktop version (landscape) -->
    <source
      media="(min-width: 768px)"
      :srcset="desktopSrcset"
      type="image/webp"
    />
    
    <!-- Mobile version (portrait crop) -->
    <source
      :srcset="mobileSrcset"
      type="image/webp"
    />
    
    <!-- Fallback -->
    <img :src="fallbackSrc" :alt="image.title" />
  </picture>
</template>

<script setup>
const props = defineProps<{
  image: { url: string; title: string }
}>()

// Desktop landscape
const { transformedUrl: desktopSrcset } = useImageTransform(props.image.url, {
  width: 1200,
  height: 600,
  fit: 'crop',
  crop: 'center'
})

// Mobile portrait
const { transformedUrl: mobileSrcset } = useImageTransform(props.image.url, {
  width: 400,
  height: 600,
  fit: 'crop',
  crop: 'top'
})

// Fallback
const { transformedUrl: fallbackSrc } = useImageTransform(props.image.url, {
  width: 800,
  height: 400
})
</script>
```

## Performance Optimization

### Lazy Loading

```vue [components/LazyImage.vue]
<template>
  <NuxtImg
    :src="image.url"
    :alt="image.title"
    loading="lazy"
    width="600"
    height="400"
    :modifiers="{ quality: 80 }"
    provider="contentstack"
  />
</template>
```

### Preloading Critical Images

```vue [pages/index.vue]
<script setup>
// Preload hero image
const { data: page } = await useGetEntryByUrl({
  contentTypeUid: 'landing_page',
  url: '/'
})

if (page.value?.hero?.image) {
  const { transformedUrl } = useImageTransform(page.value.hero.image.url, {
    width: 1200,
    height: 600,
    quality: 85
  })
  
  // Preload the hero image
  useHead({
    link: [
      {
        rel: 'preload',
        href: transformedUrl,
        as: 'image'
      }
    ]
  })
}
</script>
```

### Image Optimization Best Practices

```vue [components/OptimizedGallery.vue]
<script setup>
const props = defineProps<{
  images: Array<{
    url: string
    title: string
    description?: string
  }>
}>()

// Generate multiple sizes for each image
const optimizedImages = computed(() => {
  return props.images.map(image => {
    const { transformedUrl: thumbnail } = useImageTransform(image.url, {
      width: 300,
      height: 200,
      fit: 'crop',
      quality: 75
    })
    
    const { transformedUrl: medium } = useImageTransform(image.url, {
      width: 800,
      height: 600,
      fit: 'crop',
      quality: 85
    })
    
    const { transformedUrl: large } = useImageTransform(image.url, {
      width: 1600,
      height: 1200,
      quality: 90
    })
    
    return {
      ...image,
      thumbnail,
      medium,
      large
    }
  })
})
</script>

<template>
  <div class="gallery">
    <div 
      v-for="image in optimizedImages" 
      :key="image.url"
      class="gallery-item"
    >
      <img 
        :src="image.thumbnail"
        :alt="image.title"
        loading="lazy"
        @click="openLightbox(image)"
      />
    </div>
  </div>
</template>
```

## Error Handling

### Fallback Images

```vue [components/SafeImage.vue]
<script setup>
const props = defineProps<{
  src: string
  alt: string
  fallback?: string
}>()

const imageSrc = ref(props.src)
const hasError = ref(false)

const handleError = () => {
  if (!hasError.value && props.fallback) {
    hasError.value = true
    imageSrc.value = props.fallback
  }
}
</script>

<template>
  <img 
    :src="imageSrc"
    :alt="alt"
    @error="handleError"
    class="safe-image"
  />
</template>
```

### Image Loading States

```vue [components/ImageWithStates.vue]
<script setup>
const isLoading = ref(true)
const hasError = ref(false)

const handleLoad = () => {
  isLoading.value = false
}

const handleError = () => {
  isLoading.value = false
  hasError.value = true
}
</script>

<template>
  <div class="image-container">
    <!-- Loading placeholder -->
    <div v-if="isLoading" class="loading-placeholder">
      Loading...
    </div>
    
    <!-- Error state -->
    <div v-else-if="hasError" class="error-state">
      Failed to load image
    </div>
    
    <!-- Actual image -->
    <NuxtImg
      v-else
      :src="imageUrl"
      :alt="alt"
      @load="handleLoad"
      @error="handleError"
      provider="contentstack"
    />
  </div>
</template>
```

## Available Transformations

### Dimension Control

| Parameter | Description | Example |
|-----------|-------------|---------|
| `width` | Set image width | `width: 800` |
| `height` | Set image height | `height: 600` |
| `dpr` | Device pixel ratio | `dpr: 2` |

### Quality and Format

| Parameter | Description | Example |
|-----------|-------------|---------|
| `quality` | JPEG quality (1-100) | `quality: 85` |
| `format` | Output format | `format: 'webp'` |
| `auto` | Auto optimization | `auto: 'webp,compress'` |

### Cropping and Fitting

| Parameter | Description | Example |
|-----------|-------------|---------|
| `fit` | Resize behavior | `fit: 'crop'` |
| `crop` | Crop position | `crop: 'center'` |
| `trim` | Remove edges | `trim: 5` |

### Effects

| Parameter | Description | Example |
|-----------|-------------|---------|
| `blur` | Blur amount (0-100) | `blur: 5` |
| `brightness` | Brightness (-100 to 100) | `brightness: 10` |
| `contrast` | Contrast (-100 to 100) | `contrast: 20` |
| `saturation` | Saturation (-100 to 100) | `saturation: 15` |

## Next Steps

::div{class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6"}
  ::card
  ---
  title: "Composables"
  icon: "i-lucide-code"
  to: "/essentials/composables"
  ---
  Learn how to fetch and use images with Contentstack composables.
  ::

  ::card
  ---
  title: "TypeScript Guide"
  icon: "i-lucide-code-2"
  to: "/guides/typescript"
  ---
  Add type safety to your image transformations and components.
  ::
::
